<!DOCTYPE html>
<!--

Hello!   The HTML, CSS, and JS were written by me.  Dustin Kirk

-->	
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Title 60-65 characters -->
	<title>CSS Event Tracking Patent - How to subvert JavaScript blockers using CSS - Dustin Kirk's Portfolio</title>
	<meta property="og:title" content="CSS Event Tracking Patent - How to subvert JavaScript blockers using CSS" />

	<!-- Description 150-155 characters (2-4 sentences) -->
	<meta name="description" content="An explanation and look into the CSS event tracking patent I received while working at Tealium."/>
	<meta property="og:description" content="An explanation and look into the CSS event tracking patent I received while working at Tealium."/>

	<!-- Page Type -->
	<meta property="og:type" content="article" />

	<!-- Thumbnail Image -->
	<meta property="og:image" content="https://www.dustinkirk.com/images/banner-patent-thumb.png"/>
	<meta property="og:image:type" content="image/png"/>
	<meta property="og:image:width" content="1400"/>
	<meta property="og:image:height" content="700"/>


<link rel="stylesheet" type="text/css" href="../../styles.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">
<link rel="icon" href="images/favicon.ico" type="image/x-icon">
<script src="https://kit.fontawesome.com/a320271d59.js" crossorigin="anonymous"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-179534252-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-179534252-1');
</script>
</head>
<body class="sticky">
<a href="#main-content" class="skip-navigation">Skip to main content</a>
<div class="pageWrap">


<header class="site-header">
	<div class="header-container">
		<a href="https://www.dustinkirk.com" class="brand">
			Dustin Kirk
		</a>
		<nav class="navigation" aria-label="Main navigation">
			<button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Toggle navigation menu">
				<span class="hamburger"></span>
				<span class="hamburger"></span>
				<span class="hamburger"></span>
			</button>
			<ul class="nav-menu" id="nav-menu">
				<li>
					<a href="https://www.dustinkirk.com" class="nav-link">Portfolio</a>
				</li>
				<li>
					<a href="about.html" class="nav-link">About</a>
				</li>
				<li>
					<a href="Dustin_Kirk_Resume.pdf" target="_blank" rel="noopener noreferrer" class="nav-link">Resume</a>
				</li>
				<li>
					<a href="https://www.linkedin.com/in/dustinkirk/" target="_blank" rel="noopener noreferrer" class="nav-link">LinkedIn</a>
				</li>
				<li>
					<a href="https://dribbble.com/Dustin_Kirk" target="_blank" rel="noopener noreferrer" class="nav-link">Dribbble</a>
				</li>
			</ul>
		</nav>
	</div>
</header>

<div id="lightbox">
	<div id="lightbox_content"></div>
</div>

<main id="main-content" class="pageWrapRow pageContent">

	<header class="portfolio-header">
		<h1 class="pageTitle">A Patent For CSS Event Tracking</h1>
		<p class="pageSubtitle">How I applied CSS to subvert JavaScript blockers.</p>
	</header>

	<div class="textBlock">


<p>With many years of experience creating websites and prototypes with HTML and CSS, and a personal fondness for pushing its limits, I became interested in some of the lesser utilized CSS capabilities. One of these capabilities is the ability to trigger server calls based solely on the user's website interactions. With pixel tracking being incredibly popular in the marketing industry, and with javascript being increasingly blocked by users, I connected the dots and decided to submit a patent idea through Tealium's patent program. In doing so, I worked with a fellow engineer to iron out a few technical details and we completed the process together.</p>

<p>The process involved fully documenting the idea, getting it reviewed by Tealium's executive team, and working with patent lawyers to see it through completion. With minimal revisions along the way, the entire process took approximately two years until fully issued and posted to the USPTO website.</p>


<h2>Brief Overview</h2>

<p>The invention entails using CSS in a web-browser to identify elements on a website to be tracked and then making server calls using CSS to track actions. Trackable actions include clicks and other events on web page elements such as links, input fields, divs, spans, and list-items.</p>

<p>The invention covers two scenarios for using CSS for website tracking. The first is for CSS to be used to supplement JavaScript tracking by identifying elements to be tracked. The second is tracking actions with only CSS with no additional scripting needed.</p>


<h2>Utilizing CSS Selectors For Tracking</h2>

<p>Current web trackers require that a person specify web page elements of a website to be tracked. This is typically implemented by having the user specify element IDs via a proprietary interface or directly using JavaScript.</p>

<p>CSS already has built in selectors which website designers use to define the styles of the website elements. By utilizing the CSS for both defining style attributes and specifying elements to be tracked, the following benefits can be had:</p>

<ul>
	<li>Enable people already tasked with defining CSS styles to also define elements and actions to be tracked. These tasks have typically been done by different people. Websites implementing tracking will benefit from more people being able to take on the task of implementing and maintaining tracking.</li>

	<li>Consolidate element selectors and improve code maintainability. When website elements change, current implementations may require changes in separate places to both the styles and trackers. By utilizing CSS selectors, updates could be made in the same place and at the same time.</li>

	<li>Gives web designers flexibility in how and where trackers are defined due to the inherent capabilities of CSS. Trackers could be specified inline with webpage elements, within a block of definitions within a page, or externally. They could even be defined through a proprietary interface which generates a CSS file.</li>

	<li>The ability to target multiple elements with an element type, class name, attribute value or attribute.</li>

	<li>The ability to target elements based on screen size using media queries.</li>
</ul>

<h3>How It Works</h3>

<p>Tracking with CSS selectors requires an attribute associated with tracking to be placed within the CSS. In the example provided, this is marked "tracking marker" The selector will identify the element(s) desired to be tracked. The tracking marker has a value, and this is the tracking ID. The tracking ID is used for tracking purposes to distinguish between multiple elements tracked on a page. For example, when a specific button is pushed, the tracking code would know to send additional data such as page name, form id, etc. back to the server.</p>

<p>Within the HTML markup, CSS styles are applied as usual. JavaScript or other code is then used to parse the CSS, identify the elements to be parsed, and attach javascript calls to the specified elements during run-time.</p>

	</div>
		<div class="imgBlock">
			<img src="css_only.svg" alt="CSS tracking diagram showing how CSS selectors identify elements for tracking with no JavaScript required" class="imgFrame frameStyleSlide" style="border: none; box-shadow: none;">
		</div>
	<div class="textBlock">


<h2>Utilizing CSS Tracking With JavaScript Disabled</h2>

<p>While Javascript is often available and used for tracking, it may be disabled for a variety of reasons including speed, bandwidth, usability, accessibility, and security.</p>

<p>Web applications, especially those utilizing a large amount of JavaScript loaded from 3rd parties load more slowly. Badly written JavaScript can also consume a lot of extra bandwidth which slows down web page load times and consumes people's bandwidth. These are especially a concern to people in countries with poor internet access or who rely upon a mobile-phone to connect to the internet.</p>

<p>JavaScript may also be disabled for usability and accessibility reasons. People using screen-readers and other accessibility tools, prefer simple non-interactive websites that are easy to read and navigate.</p>

<p>Lastly JavaScript may be disabled for security and reasons. Websites may load malicious JavaScript in the background or use JavaScript to collect browser data.</p>

<p>By utilizing CSS, a component of all modern web browsers, simple websites who desire to reach users opposed to JavaScript can now see how their users are interacting with their webpages. This is beneficial for understanding how websites are being used and how best to optimize them.</p>

<h3>How It Works</h3>

<p>Tracking actions with CSS alone, is completed using the html and css loaded on the client-side web browser, and a script running on a server that parses urls requested from it.</p>

<p>The CSS contains style definitions utilizing Tracking URLs that are called upon the desired web page interactions. This type of style definition will be referred to as a Tracker. The URL in the Tracker is composed of a Domain Name, an Account ID, and a Tracking ID. By applying a CSS style to an HTML element, the URL will be called when the user performs the action specified by the Tracker's CSS Selector (eg: ‘active' = a user clicks the element, or ‘hover' when a user hovers their mouse over the element).</p>

<p>Due to the inherent properties of CSS, multiple trackers may be applied to the same HTML element, Trackers may be triggered by nesting HTML elements that have Trackers applied to them.</p>

<p>Trackers can be applied to any HTML element by following it's CSS guidelines including Divisions, Spans, List Items, Form Fields, Anchor Links, etc.</p>

<p>The Server referenced by the URL should be configured to parse the URL into its component pieces. This involves identifying the Account ID and Tracking ID. Once parsed, a log will be kept identifying which Tracker ID was called, which account it was called for and when it was called. From this log, a record of how many times an Account's Tracker ID was called for a given timeframe can be generated. The Server referenced by the URL may also get further details from the HTTP Referral data including the specific server and page making the request, the user's IP address, browser information, and user agent.</p>

<p>Tracker style definitions may be embedded in the HTML file, or be in their own CSS file and included in the web page. This CSS file may also be generated by and hosted through an event tracking service.</p>


	</div>
		<div class="imgBlock">
			<img src="css_js.svg" alt="Combined CSS and JavaScript tracking workflow showing server-side parsing and event logging" class="imgFrame frameStyleSlide" style="border: none; box-shadow: none; height: 500px;">
		</div>
	<div class="textBlock">


	</div>


</main><!-- end pageContent -->

<div class="pageWrapRow pageFooter">
	footer
</div>
</div><!-- end pagewrap -->


<script>
	$( ".imgFrame" ).click(function() {
	  var src = $(this).attr('src');
        $("#lightbox_content").css("background-image", "url(" + src + ")");
    	$("#lightbox").show();
	});



	$("#lightbox").click(function() {
		$(this).hide();
	});
</script>

<script>
// Modern mobile navigation functionality
(function() {
	'use strict';
	
	const navToggle = document.querySelector('.nav-toggle');
	const navMenu = document.querySelector('.nav-menu');
	const navLinks = document.querySelectorAll('.nav-link');
	
	if (!navToggle || !navMenu) return;
	
	// Toggle mobile menu
	function toggleMenu() {
		const isExpanded = navToggle.getAttribute('aria-expanded') === 'true';
		navToggle.setAttribute('aria-expanded', !isExpanded);
		navMenu.classList.toggle('open');
		
		// Manage focus for accessibility
		if (!isExpanded) {
			// Focus first nav link when menu opens
			const firstLink = navMenu.querySelector('.nav-link');
			if (firstLink) firstLink.focus();
		}
	}
	
	// Close menu when clicking outside
	function closeMenu(event) {
		if (!navToggle.contains(event.target) && !navMenu.contains(event.target)) {
			navToggle.setAttribute('aria-expanded', 'false');
			navMenu.classList.remove('open');
		}
	}
	
	// Close menu when pressing escape
	function handleKeydown(event) {
		if (event.key === 'Escape') {
			navToggle.setAttribute('aria-expanded', 'false');
			navMenu.classList.remove('open');
			navToggle.focus();
		}
	}
	
	// Close menu when clicking a nav link (mobile)
	function closeOnNavClick() {
		if (window.innerWidth <= 768) {
			navToggle.setAttribute('aria-expanded', 'false');
			navMenu.classList.remove('open');
		}
	}
	
	// Event listeners
	navToggle.addEventListener('click', toggleMenu);
	document.addEventListener('click', closeMenu);
	document.addEventListener('keydown', handleKeydown);
	
	navLinks.forEach(link => {
		link.addEventListener('click', closeOnNavClick);
	});
	
	// Handle window resize - ensure menu is visible on desktop
	window.addEventListener('resize', function() {
		if (window.innerWidth > 768) {
			navToggle.setAttribute('aria-expanded', 'false');
			navMenu.classList.remove('open');
		}
	});
})();
</script>
</body>
</html>
